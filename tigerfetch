#!/usr/bin/env python3

import psutil
import platform
import subprocess
import getpass

def get_cpu_info():
    freq_mhz = psutil.cpu_freq().max
    logical_cores = psutil.cpu_count(logical=True)

    if freq_mhz:
        freq_ghz = freq_mhz / 1000
        return f"{freq_ghz:.2f} GHz ({logical_cores} cores)"
    return f"N/A ({logical_cores} cores)"

def get_memory():
    mem = psutil.virtual_memory()
    total = mem.total // (1024 ** 2)
    used = mem.used // (1024 ** 2)
    return f"{used}MiB / {total}MiB"

def tigerfetch():
    cpu = get_cpu_info()
    memory = get_memory()
    kernel = platform.release()
    user = getpass.getuser()
    
    subprocess.run('figlet "TigerOS"', shell=True)
    print(f"    USER    {user}")
    print(f"    CPU     {cpu}")
    print(f"    MEM     {memory}")
    print(f"KERNEL  {kernel}")

if __name__ == "__main__":
    tigerfetch()